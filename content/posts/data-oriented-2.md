---
title: データ指向アプリケーションデザインメモ2
date: "2019-09-14T11:00:00.000Z"
template: "post"
draft: false
slug: "/posts/data-oriented-2/"
category: "daily"
tags:
  - "study"
description: "読書ログ"
---

## このページについて

データ指向アプリケーションデザイン読書の記録をつらつらと書いておく

## 6章 パーティション

**ローカルインデックス**
パーティショニングされた空間内でのセカンダリインデックス  
パーティショニングまたいだクエリが打たれると結果を結合しないといけないので負荷が高まりがち  
上記アプローチはスキャッタ/ギャザーと呼ばれる

**グローバルインデックス**
パーティション関係なしにインデックスを保持する  
ただし、この空間もパーティショニングは可能で、例えば色でいうと先頭 `a ~ s`, `t ~ z` のように分けられる  
しかし、書き込み時に複数のインデックスが指定されている場合は完了までに時間がかかりうる
(基本的にこれは非同期で行われるらしい。なので、書き込み直後はインデックス検索のデータが反映されてないかもしれない)

HBaseやMongoDBは動的にパーティションを生成するアルゴリズムが組み込まれている  
例えば、あるパーティションが10GBに達したら、5GB - 5GB のパーティションに分割される

@Todo
gossipプロトコル

## 7章 トランザクション

大まかな発想は40年変わっていない

- read committed
- スナップショット分離
- 直列化可能性

トランザクションが提供する安全性の保証は総じてACIDと呼ばれる。復習がてら追記してく。

**Atomic**
コミットさえしなければデータが変更されない。途中の書き込みをすべてリセットできる

**Consistency**